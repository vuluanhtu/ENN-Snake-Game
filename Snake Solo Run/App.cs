using Bridge;
using Newtonsoft.Json;
using System;
using System.Threading;

namespace Snake_Solo_Run
{
    public class App
    { 
            public NeuralNetwork nn;
            private static App Tu;
            
            private int[] nnLayer = new int[3] { 12, 10, 4 };
            private Random random;
           

        public static void Main()
        {
            Tu = new App();
            Tu.Start();
            /*var button = document.getElementById("BUTTON");
            if (button.addEventListener)
            {
                Snake_Solo_Run.App.Tu = new Snake_Solo_Run.App();
                button.addEventListener('click', function(){ Snake_Solo_Run.App.Tu.Start(); });
            }*/

        }

        public void Start()
        {
            random = new Random();
            nn = new NeuralNetwork(nnLayer, random);
            nn.weights[0][0] = new float[] { -40.119560989606924f, -6.214602457459364f, 16.39396001882571f, 6.717470640650703f, -40.66458427843851f, -48.56835398756357f, 8.986864266445323f, 13.857656560771936f, -34.91753497389962f, 36.15754469584559f, 26.17567208417489f, -39.388047060644276f};
            nn.weights[0][1] = new float[] { -24.775118974398413f, -38.88707006763996f, -42.92428134611076f, -24.423541535820597f, 29.757240777722203f, 37.933676078884716f, 39.8932266467685f, 21.079206080678475f, -38.48159247472957f, 3.6868554324316136f, 14.184636047195937f, -48.49978219647882f };
            nn.weights[0][2] = new float[] { 17.317788008282804f, -5.590481802630464f, -20.252684303677025f, -49.77266229678535f, -24.238652118592828f, 5.1863583061780645f, 19.944318556200855f, -46.09596603368221f, -37.736806454014406f, -41.057706340708634f, 3.5769608121258045f, 5.3204262421095905f };
            nn.weights[0][3] = new float[] { -3.2972553061774263f, -34.15475426435226f, -39.564266097528986f, 37.42682220760119f, 42.291743677245336f, -19.416339541513633f, -29.603006308713464f, 29.331115530492326f, 12.838175875525067f, 44.61114480840561f, 44.609427123614324f, -14.531220479184398f };
            nn.weights[0][4] = new float[] { -20.901733064512594f, 3.961805325915016f, 48.425614646834134f, 43.738819562708414f, 0.5759060618355392f, -7.180629883511287f, -29.328354065925048f, 48.16975281488605f, -49.55966309623777f, -10.727714822035153f, -47.82725828598591f, -49.309559119543785f };
            nn.weights[0][5] = new float[] { -46.394769706015836f, -37.36539654776705f, -9.38333084778084f, 48.438930697012196f, 7.343267489850177f, -36.94190466168425f, 11.813571053470284f, -31.052420931427005f, -29.926181947778062f, -7.794670834110427f, 14.583440760422235f, -34.79055416993357f };
            nn.weights[0][6] = new float[] { -43.19580620769216f, 34.31091978415424f, -49.301213258551996f, -36.89651185967797f, 17.67866316609023f, -15.756614769695616f, 40.957350698745515f, 7.268933373162959f, 11.561270785313695f, 4.656402605891415f, 13.448863319795976f, 42.34318569877334f };
            nn.weights[0][7] = new float[] { -24.217237287302147f, 31.89644943079746f, 10.651945676958164f, 32.284626682421475f, -49.125941097329346f, 45.1217388245844f, -17.78793310177882f, -40.39338835999062f, -14.436085459047973f, 39.920091950297405f, -7.366638424511365f, 19.734999430242468f };
            nn.weights[0][8] = new float[] { -0.3361223034263219f, -31.299480600887666f, -49.63892097568089f, -44.587129258824106f, 2.7643911320550316f, -47.06216421772827f, -32.83907919323029f, 9.803471416143452f, -25.665689341568243f, 17.053761224753117f, -46.3875007798837f, -15.885120055584757f};
            nn.weights[0][9] = new float[] { 44.87557266600224f, 26.014865830547578f, 40.69365867911543f, -31.8509598178095f, 22.21430552760806f, -27.081187291574285f, -4.725733750837726f, 3.9768375707682466f, -11.357092979064717f, -14.184140909548915f, -33.273001845587515f, 46.81108752117076f };
            nn.weights[1][0] = new float[] { 0.532441842617672f, -7.088386806234901f, -12.200146150868449f, 45.567927926577596f, 6.483847627641559f, -7.368325096260911f, -43.45364588939289f, 17.02265779814806f, -47.23972733935329f, -18.30876938454284f };
            nn.weights[1][1] = new float[] { -38.875668676977824f, -31.713811998122285f, -13.051038870146044f, -33.79380711530978f, -19.286283650103158f, -48.170163807538415f, 30.710241189557237f, 20.80634849649219f, -4.773987156699405f, 37.53699194059567f };
            nn.weights[1][2] = new float[] { -9.89940676833475f, -19.183168732180807f, 9.833529014062847f, -47.31562477411499f, -2.143888805128583f, 44.533681960093645f, -24.312604486156538f, 33.07540034087161f, -11.023081914066843f, 2.7327439993306797f };
            nn.weights[1][3] = new float[] { -30.69299276950443f, -14.595776872986825f, -18.565943124036277f, -48.58301770807385f, 25.79877920253145f, -38.957846671788886f, -44.30786194014729f, -42.96617987238159f, 3.401849955973148f, 31.393347765036552f };
            
            
            Snake snake = new Snake();
            snake.StartGame(0);
            snake.LoopGame(0, nn, 100);
            
        }
    }
}